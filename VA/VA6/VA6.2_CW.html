<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <title>VA6.2_CW</title>

    <style>
        #loading {
            color: green;
            display: none;
        }
        #success{
            color: green;
            display: none;
        }
    </style>
</head>
<body>
    <section class="container">
        <h1 class="display-3 my-2">Add New Student</h1>
        <br>
       <form>
        <label for="name">Name:</label>
        <br>
        <input type="text" id="name">
        <br>
        <label for="age">Age:</label>
        <br>
        <input type="text" id="age">
        <br>
        <label for="grade">Grade:</label>
        <br>
        <input type="text" id="grade">
        <br>
        <button class="btn btn-primary my-2" type="button" id="add__btn">add New Student</button>
       </form>
       <h3  id="loading">loading.................</h3>
       <h3 id="success">data added successfully</h3>
    </section>


    <script>
        const addBtn = document.querySelector('#add__btn');
        const apiUrl =  'https://student-management-student-neog.replit.app/students'

        const name = document.querySelector('#name');
        const age = document.querySelector('#age');
        const grade = document.querySelector('#grade')

        const loading = document.querySelector('#loading');
        const success = document.querySelector('#success');

        addBtn.addEventListener('click',function(){
            let newStudent = {
                name:name.value,
                age:age.value,
                grade:grade.value
            }

            loading.style.display = 'block'
            success.style.display = 'none'

            fetch(apiUrl,{
                method:'POST',
                body:JSON.stringify(newStudent),
                headers:{
                    'Content-Type':'application/json'
                }
            })
            .then((res)=>res.json())
            .then((data)=>{
                    if(data){
                        loading.style.display = 'none'
                            success.style.display = 'block'
                    }
            })
        })
    

    </script>
</body>
</html>