<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VA3.1_HW3</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
    <main class="container">

    <h1 class="display-4 py-3">Poll Voting</h1>

    <div class="mb-3">
        <div class="form-check mb-3">
            <input type="radio" class="form-check-input" name="vote" value="John Doe" id="John">
            <label for="John" class="form-check-label">
                John Doe 
            </label>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="radio" name="vote" value="Alex William" id="alex">
            <label class="form-check-label" for="alex">
                Alex William
            </label>
        </div>
        <div class="form-check mb-3">
            <input class="form-check-input" type="radio" value="Prerana Nawar" name="vote" id="prerana">
            <label for="prerana" form-check-label>
                Preana Nawar
            </label>
        
        </div>
    </div>
    

    

  
<button class="btn btn-primary" id="voteButton">Vote</button>

<ul class="list-group mt-3" id="result">

</ul>

<section>
    <h2 class="display-3 my-4">Winner</h2>
    <p id="winner"></p>
</section>
</main>
<script>
    let johnVoteCounter = 0;
    let alexVoteCounter  = 0;
    let  preranaVoteCounter = 0;



    const voteButton = document.querySelector('#voteButton');
    const result =document.querySelector('#result');

    const winner = document.querySelector('#winner')

    let listItems = null;

    voteButton.addEventListener('click',function(){
        const candidates = document.querySelector('input[type="radio"]:checked');
        const candidateName = candidates.value;
        const existingListItem = document.querySelector(`li[data-candiate="${candidateName}"]`)
        
       if(existingListItem){
        if(candidateName==="John Doe"){
            johnVoteCounter++;
            existingListItem.innerHTML = `${candidateName} : ${johnVoteCounter}`
        }
        else if(candidateName === "Alex William" ){
            alexVoteCounter++
            existingListItem.innerHTML = `${candidateName} : ${alexVoteCounter}`
        }
        else if(candidateName === "Prerana Nawar"){
            preranaVoteCounter++
            existingListItem.innerHTML = `${candidateName} : ${preranaVoteCounter}`
        }
             

       }
       else{
        const listItem = document.createElement('li');
        listItem.setAttribute('data-candiate',candidateName);
        listItem.className  = 'list-group-item'

        if(candidateName==="John Doe"){
            johnVoteCounter++;
            listItem.innerHTML = `${candidateName} : ${johnVoteCounter}`
        }
        else if(candidateName==="Alex William"){
            alexVoteCounter++;
            listItem.innerHTML = `${candidateName} : ${alexVoteCounter}`
        }
        else if(candidateName==="Prerana Nawar"){
            preranaVoteCounter++;
            listItem.innerHTML = `${candidateName} : ${preranaVoteCounter}`
        }


        result.appendChild(listItem)

       }
       updateWinner()
    })


    function updateWinner(){
        if(johnVoteCounter>alexVoteCounter && johnVoteCounter>preranaVoteCounter){
        winner.textContent = `John Doe is winning with ${johnVoteCounter} votes!`
    }
    else if(alexVoteCounter>johnVoteCounter && alexVoteCounter>preranaVoteCounter){
        winner.textContent = `Alex william is winning ${alexVoteCounter} votes!`
    }
    else if(preranaVoteCounter>alexVoteCounter && preranaVoteCounter > johnVoteCounter){
        winner.textContent = `Prerana Nawar is winning ${preranaVoteCounter} votes!`
    }
    else if(preranaVoteCounter === alexVoteCounter && alexVoteCounter===johnVoteCounter){
        winner.textContent = `It's a tie between John Doe, Alex william and Prerana Nawar`
    }
    else if(preranaVoteCounter===alexVoteCounter){
        winner.textContent = `It's a tie between Alex william and Prerana Nawar`
    }
    else if(johnVoteCounter===alexVoteCounter){
        winner.textContent =     `It's a tie between Alex william and John Doe`
    }
    else if(johnVoteCounter===preranaVoteCounter){
        winner.textContent = `It's a tie between John Doe And Prerana Nawar`
    }
    }


   

</script>
</body>
</html>